
# docker ps -aqf "name=tasks"

param_1="$1"

case $param_1 in
    network)
        docker network rm tasks_network
        docker network create tasks_network
        ;;
    mongo)
        docker run --name mongo --network tasks_network -p 27017:27017 -d mongo:latest
        ;;
    api)
        tasks_container_id=$(docker ps -aqf "name=tasks")

        if [ "$tasks_container_id" != "" ]; then
        echo $tasks_container_id
        docker stop "$tasks_container_id"
        docker remove "$tasks_container_id"
        fi

        tasks_image_id=$(docker images -q tasks)

        if [ "$tasks_image_id" != "" ]; then
            docker rmi "$tasks_image_id"
        fi

        docker build -t tasks .
        docker run -dit --name tasks --network tasks_network --env-file api/.env -e MONGO_URL=mongodb://mongo:27017 -p 8000:8000 tasks
        ;;
    *)
        echo "Available options ( network | mongo | api )"
        ;;
esac